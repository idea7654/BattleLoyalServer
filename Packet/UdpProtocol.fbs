union MESSAGE_ID
{
  S2C_MOVE,
  S2C_SHOOT,
  C2S_MOVE,
  C2S_EXTEND_SESSION,
  C2S_REQUEST_LOGIN,
  C2S_REQUEST_REGISTER,
  S2C_COMPLETE_LOGIN,
  S2C_COMPLETE_REGISTER,
  S2C_LOGIN_ERROR,
  S2C_REGISTER_ERROR,
  C2S_START_MATCHING,
  S2C_GAME_START
}

struct Vec3{
  x:float;
  y:float;
  z:float;
}

table Message
{
  packet: MESSAGE_ID;
}

root_type Message;

table S2C_MOVE
{
  nick_name:string;
  pos: Vec3;
  dir: Vec3;
}

table S2C_SHOOT
{
  nick_name:string;
  pos: Vec3;
  dir: Vec3;
}

table C2S_MOVE
{
  nick_name:string;
  pos: Vec3;
  dir: Vec3;
}

table C2S_EXTEND_SESSION
{
  nick_name:string;
}

table C2S_REQUEST_LOGIN
{
  email:string;
  password:string;
}

table C2S_REQUEST_REGISTER
{
  email:string;
  nickname:string;
  password:string;
}

table S2C_COMPLETE_LOGIN
{
  //issuccess:bool; //create session later
  nickname:string;
}

table S2C_COMPLETE_REGISTER
{
  issuccess:bool;
}

table S2C_LOGIN_ERROR
{
  message:string;
}  

table S2C_REGISTER_ERROR
{
  message:string;
}

table C2S_START_MATCHING
{
  nickname: string;
}

table InitUserInfo
{
  nickname: string;
  pos: Vec3;
}

table S2C_GAME_START
{
  userdata: [InitUserInfo];
}

